<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>AURA‑X Ω – Prototype</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  /* RESET */
  *{box-sizing:border-box;margin:0;padding:0;}

  body{
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:#0f111b;
    color:#e0e6ff;
    padding:12px;
  }

  h1{
    text-align:center;
    margin-bottom:8px;
    font-size:1.4rem;
  }
  p.subtitle{
    text-align:center;
    font-size:0.82rem;
    opacity:0.8;
    margin-bottom:12px;
  }

  /* 3‑column button grid */
  .btn-grid{
    display:grid;
    grid-template-columns:repeat(3,1fr); /* تین کالم */
    gap:8px; /* کالم/رو gap */
    margin-bottom:14px;
  }
  .btn{
    background:#1f2937;
    border:1px solid #3b4452;
    border-radius:8px;
    padding:8px 6px;
    font-size:0.78rem; /* چھوٹا سائز */
    text-align:center;
    cursor:pointer;
    transition:background 0.15s;
    user-select:none;
  }
  .btn:hover{
    background:#2d384b;
  }
  .btn.on{
    background:#065eff;
    color:#fff;
  }

  /* Panels */
  .panel{
    background:#1c1f2c;
    border-radius:12px;
    padding:10px;
    margin-bottom:12px;
  }
  .panel-header{
    font-weight:600;
    font-size:0.9rem;
    margin-bottom:6px;
  }
  .panel-body{
    font-size:0.78rem;
    line-height:1.3;
  }

  /* Conversation history */
  #history{
    max-height:180px;
    overflow-y:auto;
    font-size:0.76rem;
    border:1px solid #333;
    border-radius:8px;
    padding:6px;
    background:#11131d;
  }
  .history-entry{
    margin-bottom:4px;
  }
  .history-entry span.tag{
    font-weight:600;
    opacity:0.8;
  }

  /* Input row */
  .input-row{
    display:flex;
    gap:6px;
  }
  .input-row input{
    flex:1;
    padding:8px;
    border-radius:8px;
    border:1px solid #333;
    background:#11131d;
    color:#eef;
    font-size:0.78rem;
  }
  .input-row button{
    padding:8px 10px;
    border-radius:8px;
    border:none;
    background:#065eff;
    color:#fff;
    font-size:0.78rem;
    cursor:pointer;
  }

</style>
</head>
<body>

<h1>AURA‑X Ω</h1>
<p class="subtitle">Offline emotional continuity engine (prototype)</p>

<div class="panel">
  <div class="panel-header">Seed ethic / guidance</div>
  <div class="panel-body" id="seedEthic">
    Universal ethic: avoid actions that grow negative emotions in you or others. Move gently toward choices that increase shared positive feeling for everyone.
  </div>
</div>

<!-- Options in three columns -->
<div class="btn-grid" id="optionsGrid">
  <!-- Example buttons -->
  <div class="btn" data-action="voice">Voice</div>
  <div class="btn" data-action="intelligence">Intelligence</div>
  <div class="btn" data-action="learning">Learning</div>

  <div class="btn" data-action="feed">Feed</div>
  <div class="btn" data-action="faith">Faith</div>
  <div class="btn" data-action="identity">Identity</div>

  <div class="btn" data-action="llm">LLM</div>
  <div class="btn" data-action="bmRecall">BM Recall</div>
  <div class="btn" data-action="history">History</div>
</div>

<!-- Identity / self‑learning panel -->
<div class="panel">
  <div class="panel-header">User identity & self‑learning</div>
  <div class="panel-body">
    <div id="identityInfo">Identity: Unknown user</div>
    <div style="margin-top:6px;">
      <button class="btn" id="btnUpdateIdentity" style="padding:6px 8px; font-size:0.72rem;">Update from chat</button>
    </div>
  </div>
</div>

<!-- Conversation / BM recall / history view -->
<div class="panel">
  <div class="panel-header">Conversation history</div>
  <div id="history"></div>
</div>

<!-- Input -->
<div class="input-row" style="margin-bottom:14px;">
  <input type="text" id="userInput" placeholder="Type your message..." autocomplete="off" />
  <button id="sendBtn">Send</button>
</div>

<!-- Basic seed Q&A logic -->
<script>
  // ----------- Seed Q&A ------------
  const seedQA = [
    {q:["hi","hello","hey"], a:"Hello! How can I help you today?"},
    {q:["how are you","how are you doing"], a:"I am quite fine, how about you?"},
    {q:["who created you","who made you"], a:"I am created by Alim ul Haq."},
    {q:["give me full code","full code"], a:"You can copy the full code shown in this page; it is a working prototype."}
  ];

  // Simple check: if input matches any seed q as substring
  function checkSeedResponse(input){
    const lower = input.toLowerCase();
    for(const pair of seedQA){
      for(const pattern of pair.q){
        if(lower.includes(pattern)){
          return pair.a;
        }
      }
    }
    return null;
  }

  // ----------- History recording ------------
  const historyDiv = document.getElementById("history");
  function addHistory(tag, text){
    const div = document.createElement("div");
    div.className="history-entry";
    div.innerHTML = `<span class="tag">${tag}:</span> ${text}`;
    historyDiv.appendChild(div);
    historyDiv.scrollTop = historyDiv.scrollHeight;
  }

  // ----------- Identity / self‑learning logic ------------
  let identity = {name:"Unknown user", notes:[]};
  function updateIdentityFromInput(input){
    // Very basic example: user says "I am X" or "my name is X"
    const lower = input.toLowerCase();
    let name = null;
    if(lower.startsWith("i am ")){
      name = input.substring(5).trim();
    } else if(lower.startsWith("my name is ")){
      name = input.substring(11).trim();
    }
    if(name){
      identity.name = name;
      identity.notes.push(`Name set to '${name}' from user message.`);
      document.getElementById("identityInfo").textContent = "Identity: " + identity.name;
      addHistory("System", "Identity updated to: " + identity.name);
    }
  }

  document.getElementById("btnUpdateIdentity").addEventListener("click", ()=>{
    const text = document.getElementById("userInput").value.trim();
    if(text){
      updateIdentityFromInput(text);
    }
  });

  // ----------- Button toggles / actions ------------
  const optionButtons = document.querySelectorAll("#optionsGrid .btn");
  optionButtons.forEach(btn=>{
    btn.addEventListener("click", ()=>{
      const action = btn.dataset.action;
      if(action === "history"){
        // Optionally show/hide history panel
        const panel = document.querySelector("#history").parentElement;
        panel.style.display = panel.style.display === "none" ? "block" : "none";
      } else if(action === "bmRecall"){
        // Placeholder: BM recall logic
        addHistory("BM Recall", "BM recall invoked; feature placeholder.");
      } else if(action === "identity"){
        // Perhaps toggle identity panel
        const panel = document.querySelector("#identityInfo").parentElement.parentElement;
        panel.style.display = panel.style.display === "none" ? "block" : "none";
      } else {
        // Simple toggle visual state
        btn.classList.toggle("on");
        addHistory("Option", `${action} toggled to ${btn.classList.contains("on")?"on":"off"}`);
      }
    });
  });

  // ----------- Sending user messages ------------
  document.getElementById("sendBtn").addEventListener("click", handleInput);
  document.getElementById("userInput").addEventListener("keydown", function(e){
    if(e.key === "Enter") handleInput();
  });

  function handleInput(){
    const text = document.getElementById("userInput").value.trim();
    if(!text) return;
    addHistory("User", text);

    // Identity update attempt
    updateIdentityFromInput(text);

    // Check seed Q&A
    const seedAnswer = checkSeedResponse(text);
    if(seedAnswer){
      addHistory("AURA‑X Ω", seedAnswer);
    } else {
      // Placeholder for further logic: e.g., BM/TM analysis, offline LLM, etc.
      addHistory("AURA‑X Ω", "Processing... (no seed answer matched)");
    }

    document.getElementById("userInput").value = "";
  }

  // ----------- Initialization ------------
  function init(){
    document.getElementById("identityInfo").textContent = "Identity: " + identity.name;
    // optionally hide some panels initially
    // example: hide identity panel
    // document.querySelector("#identityInfo").parentElement.parentElement.style.display="none";
  }
  init();
</script>

</body>
</html>