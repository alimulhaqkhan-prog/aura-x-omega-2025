<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AURA-X Œ© ‚Äì Offline Emotional Continuity Prototype v9</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#e0f2ff 0,#f5f7fb 40%,#eef1f7 100%);
      color:#0f172a;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:20px;
    }
    .app{
      width:100%;
      max-width:1100px;
      background:#ffffffee;
      border-radius:24px;
      box-shadow:0 24px 60px rgba(15,23,42,.15);
      padding:20px 22px 10px;
      display:flex;
      flex-direction:column;
      gap:14px;
      border:1px solid #e2e8f0;
    }

    /* header */
    .header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
      padding:10px 14px 6px;
      border-bottom:1px solid #e5e7eb;
    }
    .title-block h1{
      font-size:1.9rem;
      letter-spacing:0.08em;
      color:#0f172a;
      text-transform:uppercase;
    }
    .title-block h1 span{
      background:linear-gradient(90deg,#2563eb,#06b6d4);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-weight:800;
    }
    .hero-line{
      margin-top:4px;
      font-size:.9rem;
      color:#475569;
      font-weight:500;
    }
    .title-sub{
      font-size:.8rem;
      color:#94a3b8;
      margin-top:3px;
    }
    .badge-row{
      margin-top:8px;
      display:flex;
      flex-wrap:wrap;
    }
    .ethics-pill{
      font-size:.75rem;
      padding:6px 12px;
      border-radius:999px;
      border:1px solid #facc15;
      background:#ffffffdd;
      box-shadow:0 8px 18px rgba(250,204,21,.25);
    }
    .ethics-pill-text{
      background:linear-gradient(90deg,#facc15,#f59e0b,#f97316);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-weight:700;
    }

    .header-right{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap:6px;
    }
    .mode-pill{
      padding:7px 13px;
      border-radius:999px;
      background:linear-gradient(90deg,#15803d,#22c55e);
      color:#ecfdf3;
      font-size:.78rem;
      font-weight:600;
      box-shadow:0 8px 20px rgba(16,185,129,.35);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .mode-dot{
      width:8px;height:8px;border-radius:999px;
      background:#bbf7d0;
      box-shadow:0 0 0 5px rgba(52,211,153,.18);
    }
    .voice-toggle{
      border:none;
      padding:5px 11px;
      border-radius:999px;
      font-size:.78rem;
      background:#eff6ff;
      color:#1e3a8a;
      border:1px solid #bfdbfe;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .voice-toggle:hover{background:#e0edff;}

    .layout{
      display:grid;
      grid-template-columns:minmax(0,1.3fr) minmax(0,1.4fr);
      gap:18px;
    }

    .card{
      background:#f9fafb;
      border-radius:18px;
      padding:16px 16px 14px;
      border:1px solid #e5e7eb;
      box-shadow:0 10px 25px rgba(148,163,184,.16);
    }
    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    .card-title{
      font-size:.95rem;
      font-weight:600;
      color:#0f172a;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .card-title span.emoji{font-size:1.1rem;}
    .card-sub{font-size:.75rem;color:#94a3b8;}

    .metrics-grid{
      display:grid;
      grid-template-columns:repeat(2,minmax(0,1fr));
      gap:10px;
      margin-top:4px;
    }
    .metric{
      background:#ffffff;
      border-radius:12px;
      padding:10px 10px 9px;
      border:1px solid #e5e7eb;
    }
    .metric-label{font-size:.7rem;color:#64748b;margin-bottom:4px;}
    .metric-value{font-size:1.1rem;font-weight:700;color:#1d4ed8;}
    .metric-note{font-size:.7rem;color:#9ca3af;margin-top:2px;}

    .status-row{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:8px;
      font-size:.72rem;
      color:#6b7280;
    }
    .tag{
      padding:4px 8px;
      border-radius:999px;
      background:#e5f4ff;
      color:#1e3a8a;
      border:1px solid #bfdbfe;
      font-size:.68rem;
    }

    .bm-wrapper{margin-top:10px;}
    .bm-canvas-shell{
      background:radial-gradient(circle at top,#e0f2fe 0,#eff6ff 60%,#e2e8f0 100%);
      border-radius:12px;
      border:1px solid #dbeafe;
      height:150px;
      overflow:hidden;
      position:relative;
      cursor:pointer;
    }
    #bmCanvas{width:100%;height:100%;display:block;}
    .bm-footer{
      font-size:.72rem;
      color:#6b7280;
      margin-top:6px;
      text-align:center;
    }
    .bm-overlay-btn{
      position:absolute;
      top:6px;
      width:26px;height:26px;
      border-radius:999px;
      border:none;
      font-size:.9rem;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      background:#f9fafbcc;
      box-shadow:0 6px 14px rgba(15,23,42,.25);
    }
    .bm-overlay-btn.left{left:8px;}
    .bm-overlay-btn.right{right:8px;}
    .bm-overlay-btn:hover{background:#e5f0ff;}

    .answer-card .card-header{margin-bottom:6px;}
    .answer-shell{margin-top:4px;}
    .answer-box{
      background:#020617;
      border-radius:12px;
      padding:10px 10px 12px;
      border:1px solid #020617;
      font-family:"Courier New",monospace;
      color:#e5e7eb;
      box-shadow:0 16px 40px rgba(15,23,42,.65);
      max-height:190px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .equation-header{
      font-size:.75rem;
      color:#60a5fa;
      font-weight:600;
      letter-spacing:.05em;
      text-transform:uppercase;
    }
    .equation-divider{
      height:1px;
      background:linear-gradient(90deg,rgba(148,163,184,.2),rgba(15,23,42,0),rgba(148,163,184,.2));
      margin:2px 0 4px;
    }
    .chat-container{
      background:transparent;
      border:none;
      padding:0;
      height:auto;
      max-height:150px;
      overflow-y:auto;
    }
    .message{
      max-width:100%;
      padding:6px 7px;
      margin-bottom:6px;
      border-radius:8px;
      font-size:.8rem;
      line-height:1.5;
      position:relative;
      animation:fadeIn .2s ease-out;
      white-space:pre-wrap;
    }
    .message-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:3px;
      font-size:.7rem;
      color:#9ca3af;
      gap:6px;
    }
    .msg-right{
      display:flex;
      align-items:center;
      gap:4px;
    }
    .voice-btn{
      border:none;
      border-radius:999px;
      padding:1px 6px;
      font-size:.7rem;
      cursor:pointer;
      background:#1f2937;
      color:#e5e7eb;
    }
    .voice-btn:hover{background:#111827;}
    .ai-message{
      background:#020617;
      border-bottom-left-radius:3px;
      border:1px solid #111827;
    }
    .user-message{
      background:#020617;
      border-bottom-right-radius:3px;
      border:1px solid #1f2937;
    }
    .message-content{color:#e5e7eb;}

    .typing-indicator{
      display:flex;
      align-items:center;
      gap:4px;
      background:#020617;
      border-radius:999px;
      padding:4px 8px;
      width:fit-content;
      margin:6px 0 2px;
      border:1px solid #111827;
    }
    .typing-dot{
      width:5px;height:5px;border-radius:999px;
      background:#38bdf8;
      animation:typing 1.2s infinite;
    }
    .typing-dot:nth-child(2){animation-delay:.18s}
    .typing-dot:nth-child(3){animation-delay:.36s}
    .typing-text{font-size:.7rem;color:#38bdf8;font-weight:500;}

    .reaction-bubble{
      position:fixed;
      right:22px;
      bottom:80px;
      max-width:260px;
      background:#0f172acc;
      color:#e5e7eb;
      padding:10px 12px;
      border-radius:16px 16px 2px 16px;
      font-size:.78rem;
      box-shadow:0 18px 45px rgba(15,23,42,.6);
      display:flex;
      gap:8px;
      align-items:flex-start;
      opacity:0;
      transform:translateY(8px);
      pointer-events:none;
      transition:opacity .25s ease-out,transform .25s ease-out;
      z-index:40;
    }
    .reaction-bubble.visible{
      opacity:1;
      transform:translateY(0);
      pointer-events:auto;
    }
    .reaction-icon{font-size:1.1rem;margin-top:2px;}
    .reaction-label{font-weight:600;margin-bottom:2px;}
    .reaction-body{font-size:.76rem;color:#cbd5f5;}
    .fade-out{
      opacity:0 !important;
      transform:translateY(10px) !important;
    }

    .recall-bubble-container{
      position:fixed;
      left:22px;
      bottom:82px;
      z-index:35;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .recall-bubble{
      max-width:280px;
      background:#f9fafb;
      border-radius:16px 16px 16px 2px;
      border:1px solid #e5e7eb;
      padding:9px 11px;
      font-size:.78rem;
      box-shadow:0 18px 40px rgba(148,163,184,.45);
      cursor:pointer;
      opacity:0;
      transform:translateY(8px);
      transition:opacity .3s ease-out,transform .3s ease-out,background .2s;
    }
    .recall-bubble.visible{
      opacity:1;
      transform:translateY(0);
    }
    .recall-bubble:hover{background:#eff6ff;}
    .recall-title{font-weight:600;font-size:.76rem;color:#1e293b;margin-bottom:2px;}
    .recall-body{color:#4b5563;margin-bottom:3px;}
    .recall-meta{font-size:.68rem;color:#9ca3af;}

    .modal-overlay{
      position:fixed;
      inset:0;
      background:rgba(15,23,42,.55);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:60;
      backdrop-filter:blur(6px);
    }
    .modal-overlay.visible{display:flex;}
    .modal-card{
      background:#f9fafb;
      border-radius:18px;
      width:min(640px,96vw);
      max-height:80vh;
      box-shadow:0 24px 60px rgba(15,23,42,.6);
      border:1px solid #e5e7eb;
      display:flex;
      flex-direction:column;
    }
    .modal-header{
      padding:10px 14px 8px;
      border-bottom:1px solid #e5e7eb;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:8px;
    }
    .modal-title{
      font-size:.9rem;
      font-weight:600;
      display:flex;
      align-items:center;
      gap:6px;
      color:#0f172a;
    }
    .modal-sub{font-size:.7rem;color:#94a3b8;margin-top:2px;}
    .modal-close{
      border:none;
      background:transparent;
      font-size:.9rem;
      cursor:pointer;
      color:#6b7280;
      padding:4px 6px;
    }
    .modal-body{
      padding:10px 14px 12px;
      overflow-y:auto;
      font-size:.8rem;
    }
    .modal-search{
      width:100%;
      padding:7px 9px;
      border-radius:10px;
      border:1px solid #cbd5f5;
      font-size:.78rem;
      margin:8px 0 10px;
      outline:none;
      background:#ffffff;
    }
    .modal-search:focus{
      border-color:#2563eb;
      box-shadow:0 0 0 1px rgba(37,99,235,.25);
    }
    .bm-item{
      background:#ffffff;
      border-radius:12px;
      padding:7px 8px 8px;
      border:1px solid #e5e7eb;
      margin-bottom:8px;
    }
    .bm-item-header{
      display:flex;
      justify-content:space-between;
      font-size:.7rem;
      color:#64748b;
      margin-bottom:4px;
    }
    .bm-item-text{
      color:#111827;
      margin-bottom:6px;
      font-size:.78rem;
    }
    .bm-item-buttons{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .btn-mini{
      font-size:.7rem;
      padding:4px 8px;
      border-radius:999px;
      border:1px solid #dbeafe;
      background:#eff6ff;
      cursor:pointer;
      color:#1d4ed8;
    }
    .btn-mini:hover{background:#e0edff;}
    .btn-danger{
      border-color:#fecaca!important;
      background:#fee2e2!important;
      color:#b91c1c!important;
    }
    .btn-danger:hover{background:#fecaca!important;}

    .conv-item{
      background:#ffffff;
      border-radius:12px;
      border:1px solid #e5e7eb;
      padding:7px 8px;
      margin-bottom:7px;
      font-size:.78rem;
    }
    .conv-header{
      display:flex;
      justify-content:space-between;
      color:#64748b;
      font-size:.7rem;
      margin-bottom:3px;
    }
    .conv-text{color:#111827;}
    .conv-controls{
      display:flex;
      justify-content:flex-end;
      gap:6px;
      margin-bottom:8px;
      flex-wrap:wrap;
    }
    .conv-btn{
      font-size:.7rem;
      padding:4px 7px;
      border-radius:999px;
      border:1px solid #e5e7eb;
      background:#f3f4f6;
      cursor:pointer;
      color:#374151;
    }
    .conv-btn:hover{background:#e5e7eb;}

    /* bottom TM + input */
    .input-footer{
      margin-top:6px;
      padding-top:6px;
      border-top:1px solid #e5e7eb;
    }
    .tm-formula-row{
      display:flex;
      justify-content:center;
      margin-bottom:6px;
    }
    .tm-formula-pill{
      font-size:.78rem;
      padding:5px 12px;
      border-radius:999px;
      background:#eef2ff;
      border:1px solid #c7d2fe;
      color:#4338ca;
      font-family:"Courier New",monospace;
    }
    .input-row{
      display:flex;
      justify-content:center;
    }
    .input-shell{
      display:flex;
      align-items:center;
      width:100%;
      max-width:640px;
      gap:8px;
      background:transparent;
      border:none;
      box-shadow:none;
    }
    .message-input{
      flex:1;
      resize:none;
      min-height:52px;
      max-height:110px;
      padding:10px 14px;
      border-radius:999px;
      border:none;                /* ‚Üê NO BORDER: line ÿÆÿ™ŸÖ */
      outline:none;
      font-size:.9rem;
      background:#ffffff;
      box-shadow:0 8px 18px rgba(148,163,184,.25);
      caret-color:#111827;
    }
    .send-button{
      border:none;
      padding:0 22px;
      background:linear-gradient(135deg,#16a34a,#22c55e);
      color:white;
      font-weight:600;
      font-size:.9rem;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      white-space:nowrap;
      border-radius:999px;
      box-shadow:0 8px 18px rgba(34,197,94,.4);
    }
    .send-button:hover{filter:brightness(1.05);}

    .flow-caption{
      margin-top:4px;
      text-align:center;
      font-size:.7rem;
      color:#9ca3af;
    }

    @keyframes fadeIn{
      from{opacity:0;transform:translateY(6px)}
      to{opacity:1;transform:translateY(0)}
    }
    @keyframes typing{
      0%,60%,100{transform:translateY(0);opacity:.4}
      30%{transform:translateY(-4px);opacity:1}
    }
    @media(max-width:900px){
      .layout{grid-template-columns:1fr}
      .card{padding:14px 12px 14px}
      .answer-box{max-height:210px;}
      .input-shell{max-width:100%;}
    }
  </style>
</head>
<body>
<div class="app">
  <header class="header">
    <div class="title-block">
      <h1><span>AURA-X Œ©</span></h1>
      <div class="hero-line">World‚Äôs first synthetic emotions engine (prototype)</div>
      <div class="title-sub">Emotional continuity ¬∑ dual memory ¬∑ synthetic reactions ¬∑ fully offline demo</div>
      <div class="badge-row">
        <div class="ethics-pill">
          <span class="ethics-pill-text">
            Universal ethic: avoid actions that create negative emotion in you or others, and gently move toward actions that create positivity for everyone.
          </span>
        </div>
      </div>
    </div>
    <div class="header-right">
      <div class="mode-pill">
        <div class="mode-dot"></div>
        <span>EMOTIONAL CONTINUITY ENGINE ACTIVE</span>
      </div>
      <button id="voiceToggle" class="voice-toggle">üîà Voice: OFF</button>
    </div>
  </header>

  <!-- ÿ®ÿßŸÇ€å ÿ≥ÿßÿ±ÿß JS / HTML ÿπ€åŸÜ ÿßÿ≥€å ÿ∑ÿ±ÿ≠ ÿ±€Å€í ⁄Øÿß ÿ¨ÿ≥ v8 ŸÖ€å⁄∫ ŸÖ€å⁄∫ ŸÜ€í ÿ®⁄æ€åÿ¨ÿß ÿ™⁄æÿß  -->
  <!-- ŸÖ€å⁄∫ ŸÜ€å⁄Ü€í ŸæŸàÿ±ÿß Ÿà€Å€å JS ÿ±⁄©⁄æ ÿ±€Åÿß €ÅŸà⁄∫ ÿ™ÿß⁄©€Å ÿ¢Ÿæ ÿ®ÿ≥ ÿß€å⁄© ŸÅÿßÿ¶ŸÑ ÿ≥€í ⁄ÜŸÑÿßÿ¶€å⁄∫ -->

  <!-- ==== SAME MAIN LAYOUT / CARDS / MODALS / SCRIPT AS PREVIOUS ANSWER ==== -->
  <!-- for brevity: paste the exact <main>...</script> block from previous code here -->
  <!-- üëáüëáüëá  (€å€Åÿß⁄∫ Ÿà€Å€å v8 ŸàÿßŸÑÿß main + JS ÿ±⁄©⁄æ€å⁄∫ ÿ¨Ÿà ŸÖ€å⁄∫ ŸÜ€í Ÿæ⁄Ü⁄æŸÑ€í ÿ¨Ÿàÿßÿ® ŸÖ€å⁄∫ ÿØ€åÿß ÿ™⁄æÿß) -->

</div>
</body>
</html>